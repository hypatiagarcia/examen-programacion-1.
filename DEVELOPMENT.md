# Development Guide

This guide provides detailed information for developers working on the Spring Boot CRUD Application.

## 🚀 Quick Start for Developers

### 1. Environment Setup

```bash
# Clone the repository
git clone <repository-url>
cd springbootapp

# Make sure you have Java 21 installed
java -version

# Make Maven wrapper executable
chmod +x mvnw

# Install dependencies and compile
./mvnw clean compile
```

### 2. Database Setup

```bash
# Start PostgreSQL (Ubuntu/Debian)
sudo service postgresql start

# Connect to PostgreSQL
sudo -u postgres psql

# Create database and user
CREATE DATABASE springboot_crud;
CREATE USER springboot_user WITH PASSWORD 'password';
GRANT ALL PRIVILEGES ON DATABASE springboot_crud TO springboot_user;
\q
```

### 3. Running in Development Mode

```bash
# Start the application with hot reload
./mvnw spring-boot:run

# Or run with specific profile
./mvnw spring-boot:run -Dspring-boot.run.profiles=dev
```

## 🏗️ Architecture Overview

### Layer Architecture

```
┌─────────────────────────────────────┐
│           Presentation Layer        │
│    (Controllers + Thymeleaf)        │
├─────────────────────────────────────┤
│            Service Layer            │
│        (Business Logic)             │
├─────────────────────────────────────┤
│          Repository Layer           │
│      (Data Access - JPA)            │
├─────────────────────────────────────┤
│           Database Layer            │
│         (PostgreSQL)                │
└─────────────────────────────────────┘
```

### Security Flow

```
Request → Security Filter → Authentication → Authorization → Controller
```

## 📝 Code Standards

### Java Code Style

- Use **Java 21** features where appropriate
- Follow **Spring Boot best practices**
- Use **Lombok** annotations to reduce boilerplate
- Maintain **clean code** principles

### Example Entity Pattern

```java
@Entity
@Table(name = "entities")
@Data
@AllArgsConstructor
@NoArgsConstructor
public class EntityName {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @NotNull
    @Size(min = 1, max = 100)
    private String name;
    
    // Getters and setters generated by Lombok
}
```

### Repository Pattern

```java
@Repository
public interface EntityRepository extends JpaRepository<EntityName, Long> {
    Optional<EntityName> findByName(String name);
    List<EntityName> findByActiveTrue();
}
```

### Service Pattern

```java
@Service
@Transactional
public class EntityService {
    
    private final EntityRepository repository;
    
    public EntityService(EntityRepository repository) {
        this.repository = repository;
    }
    
    public List<EntityName> findAll() {
        return repository.findAll();
    }
    
    public EntityName save(EntityName entity) {
        return repository.save(entity);
    }
}
```

### Controller Pattern

```java
@Controller
@RequestMapping("/entities")
public class EntityController {
    
    private final EntityService service;
    
    public EntityController(EntityService service) {
        this.service = service;
    }
    
    @GetMapping
    public String list(Model model) {
        model.addAttribute("entities", service.findAll());
        return "entity/list";
    }
}
```

## 🧪 Testing

### Unit Tests

```bash
# Run all tests
./mvnw test

# Run specific test class
./mvnw test -Dtest=UserServiceTest

# Run with coverage
./mvnw test jacoco:report
```

### Integration Tests

```java
@SpringBootTest
@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)
@TestPropertySource(properties = {
    "spring.datasource.url=jdbc:h2:mem:testdb",
    "spring.jpa.hibernate.ddl-auto=create-drop"
})
class IntegrationTest {
    // Test implementation
}
```

## 🔧 Configuration Management

### Application Profiles

- **default**: Basic configuration
- **dev**: Development with debug logging
- **prod**: Production optimized
- **test**: Test environment with H2 database

### Profile-specific Properties

```properties
# application-dev.properties
logging.level.com.example.springbootapp=DEBUG
spring.jpa.show-sql=true
spring.devtools.restart.enabled=true

# application-prod.properties
logging.level.com.example.springbootapp=WARN
spring.jpa.show-sql=false
server.compression.enabled=true
```

## 🚢 Deployment

### Building for Production

```bash
# Create optimized JAR
./mvnw clean package -Pprod

# Run with production profile
java -jar -Dspring.profiles.active=prod target/springbootapp-0.0.1-SNAPSHOT.jar
```

### Docker Deployment

```dockerfile
# Dockerfile
FROM openjdk:21-jdk-slim

WORKDIR /app
COPY target/springbootapp-0.0.1-SNAPSHOT.jar app.jar

EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

```bash
# Build Docker image
docker build -t springbootapp .

# Run with Docker Compose
docker-compose up -d
```

## 🔍 Debugging

### Application Logs

```bash
# Tail application logs
tail -f logs/application.log

# View with specific log level
grep "ERROR" logs/application.log
```

### Database Debugging

```properties
# Enable SQL logging
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
```

### Remote Debugging

```bash
# Start with remote debugging enabled
java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005 -jar app.jar
```

## 📊 Performance Monitoring

### Actuator Endpoints

```properties
# Enable actuator endpoints
management.endpoints.web.exposure.include=health,info,metrics,env
management.endpoint.health.show-details=always
```

Available endpoints:
- `/actuator/health` - Application health
- `/actuator/info` - Application information
- `/actuator/metrics` - Application metrics
- `/actuator/env` - Environment properties

## 🔒 Security Considerations

### Password Security

- Passwords are encrypted using BCrypt
- Minimum 8 characters recommended
- Special characters and numbers encouraged

### Session Management

```properties
# Session timeout (30 minutes)
server.servlet.session.timeout=30m

# Secure cookies in production
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
```

### HTTPS Configuration

```properties
# For production
server.ssl.enabled=true
server.ssl.key-store=classpath:keystore.jks
server.ssl.key-store-password=password
server.ssl.key-password=password
```

## 🐛 Common Issues & Solutions

### Issue: Database Connection Refused

**Solution:**
```bash
# Check PostgreSQL status
sudo service postgresql status

# Start PostgreSQL
sudo service postgresql start

# Check if database exists
sudo -u postgres psql -l
```

### Issue: Port Already in Use

**Solution:**
```bash
# Find process using port 8080
lsof -ti:8080

# Kill the process
kill -9 $(lsof -ti:8080)

# Or change port in application.properties
server.port=8081
```

### Issue: Maven Wrapper Permission Denied

**Solution:**
```bash
chmod +x mvnw
./mvnw clean install
```

## 📚 Additional Resources

- [Spring Boot Documentation](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/)
- [Spring Security Reference](https://docs.spring.io/spring-security/reference/)
- [Spring Data JPA Documentation](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/)
- [Thymeleaf Documentation](https://www.thymeleaf.org/documentation.html)
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)

## 🤝 Contributing Guidelines

1. **Fork** the repository
2. **Create** a feature branch from `main`
3. **Write** tests for new functionality
4. **Follow** coding standards
5. **Update** documentation
6. **Submit** a pull request

### Commit Message Format

```
type(scope): description

[optional body]

[optional footer]
```

Types: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`

Example:
```
feat(user): add user registration functionality

- Add user registration form
- Implement email validation
- Add password confirmation

Closes #123
```
